machine:
  node:
    version: 6.0.0
  ruby:
    version: 2.3.1

dependencies:
  post:
    # Install brakeman. We always go with the latest (unlike rubocop where we
    # include the dependency in the project tied to a version) because we want
    # to check the project against the latest known vulnerabilities.
    - gem install brakeman --no-ri --no-rdoc
    # Install overcommit.
    # This will run the following checks
    #   - CoffeeLint
    #   - YamlSyntax
    #   - TrailingWhitespace
    #   - HardTabs
    - gem install overcommit -v 0.37.0 --no-ri --no-rdoc
    - overcommit --sign
    # Install htmlhint
    - npm install -g htmlhint

test:
  pre:
    - brakeman
    - overcommit --run
    - htmlhint ./app/**/*.html.erb
    - bundle exec rubocop
